
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rufusüê∂</title>
    
    <!-- SEO & Educational Metadata -->
    <meta name="description" content="A custom-built AI chatbot, 'rufusüê∂', designed for interactive learning, educational assistance, and exploring concepts in artificial intelligence. Powered by advanced conversational AI.">
    <meta name="keywords" content="AI, chatbot, educational tool, artificial intelligence, machine learning, conversational AI, programming, STEM, education, interactive learning, AI assistant, custom AI, Gemini">
    <meta name="author" content="Dhruv Gowda">
    <meta name="robots" content="index, follow">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="rufusüê∂ - An Educational AI Chatbot">
    <meta property="og:description" content="Interact with a custom-built AI designed for educational purposes.">
    <meta property="og:image" content="https://storage.googleapis.com/maker-suite-assets/project_guidelines/gemini_logo_192.png">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:title" content="rufusüê∂ - An Educational AI Chatbot">
    <meta property="twitter:description" content="Interact with a custom-built AI designed for educational purposes.">
    <meta property="twitter:image" content="https://storage.googleapis.com/maker-suite-assets/project_guidelines/gemini_logo_192.png">
    
    <!-- Structured Data for Education -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "EducationalApplication",
      "name": "rufusüê∂",
      "description": "An interactive, educational AI chatbot created with the AI Persona Builder.",
      "applicationCategory": "EducationalApplication",
      "operatingSystem": "Web",
      "educationalUse": [
        "learning tool",
        "skill development",
        "interactive learning"
      ],
      "creator": {
        "@type": "Person",
        "name": "Dhruv Gowda"
      }
    }
    </script>

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <style>
        /* Simple scrollbar styling */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #2d3748; }
        ::-webkit-scrollbar-thumb { background: #4a5568; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #718096; }

        #sidebar {
            transition: transform 0.3s ease-in-out;
        }
        @media (max-width: 768px) {
            #sidebar.translate-x-0 {
                 transform: translateX(0);
            }
            #sidebar {
                transform: translateX(-100%);
            }
        }
        /* Ensure hljs background is respected */
        .hljs {
          border-radius: 0 0 0.375rem 0.375rem; /* rounded-b-md */
        }
        .code-block-container .copy-button svg {
            width: 16px;
            height: 16px;
        }
    </style>
</head>
<body class="bg-gray-900 overflow-hidden h-screen">
    <div class="flex h-screen">
        <!-- Sidebar -->
        <div id="sidebar" class="bg-gray-800 text-white w-64 flex-shrink-0 flex flex-col absolute md:relative z-20 h-full inset-y-0 left-0">
            <div class="p-4 border-b border-gray-700">
                <button id="new-chat-button" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-colors">
                    + New Chat
                </button>
            </div>
            <nav id="conversation-list" class="flex-1 overflow-y-auto p-2 space-y-1"></nav>
            
            <div class="mt-auto border-t border-gray-700">
                
                
    <div id="creator-pill" class="p-4 cursor-pointer hover:bg-gray-700/50 transition-colors">
        <div class="flex items-center gap-3">
            <img src>https://p19-pu-sign-useast8.tiktokcdn-us.com/tos-useast8-avt-0068-tx2/265aa071f5583da5ea10373811edf0a6~tplv-tiktokx-cropcenter:1080:1080.jpeg?dr=9640&refresh_token=312860f4&x-expires=1756422000&x-signature=%2FscKuossFeQrfPtKRlZbUheokmY%3D&t=4d5b0474&ps=13740610&shp=a5d48078&shcp=81f88b70&idc=useast5" alt="Creator" class="w-8 h-8 rounded-full">
            <div>
                 <p class="font-semibold text-white text-sm">Dhruv Gowda</p>
                 <p class="text-xs text-gray-400">Creator</p>
            </div>
        </div>
    </div>

            </div>
        </div>

        <!-- Main Chat Area -->
        <div class="flex-1 flex flex-col relative">
            <button id="menu-toggle" class="md:hidden absolute top-4 left-4 z-30 text-white p-2 bg-gray-800/50 rounded-md">
                 <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
            </button>
             <div id="app-container" class="bg-gradient-to-br from-purple-100 to-yellow-50 text-purple-900 font-sans flex flex-col h-full">
                <header id="header" class="bg-gradient-to-r from-purple-400 to-yellow-300 p-4 text-center text-2xl font-bold shadow-xl text-white">
                    rufusüê∂
                </header>
                <div id="chat-window" class="flex-1 p-4 overflow-y-auto space-y-4 bg-white bg-opacity-60 rounded-3xl m-4 shadow-inner">
                    <!-- Messages will be appended here -->
                </div>
                <div id="input-area" class="p-4 bg-gradient-to-r from-purple-50 to-yellow-25 border-t border-purple-200 shadow-2xl flex items-center">
                    <div class="flex">
                        <input type="text" id="message-input" placeholder="Type your message..." class="w-full bg-white bg-opacity-80 border border-purple-200 rounded-full p-3 focus:outline-none focus:ring-2 focus:ring-purple-300 text-purple-800 placeholder-purple-400" disabled />
                        <button id="send-button" class="bg-yellow-400 text-purple-700 font-bold py-3 px-6 rounded-full ml-2 hover:bg-yellow-500 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:ring-offset-2 shadow-lg" disabled>Send</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Details Modal -->
    <div id="details-modal" class="fixed inset-0 z-[60] hidden items-center justify-center bg-black/60 backdrop-blur-sm p-4 transition-opacity duration-300 ease-in-out opacity-0">
        <div id="modal-panel" class="bg-gray-800 rounded-lg shadow-xl max-w-lg w-full text-white relative border border-gray-700 transition-transform duration-300 ease-in-out scale-95">
            <div class="flex justify-between items-center p-4 border-b border-gray-700">
                <h3 id="modal-title" class="text-lg font-bold"></h3>
                <button id="close-modal-button" class="text-gray-400 hover:text-white transition-colors text-2xl leading-none">&times;</button>
            </div>
            <div class="p-4">
                <div id="modal-content" class="text-gray-300 whitespace-pre-wrap max-h-[60vh] overflow-y-auto"></div>
            </div>
        </div>
    </div>


    <script type="module">
        import { GoogleGenAI } from 'https://esm.run/@google/genai';

        const config = {"name":"rufusüê∂","persona":"you are rufus an SI (superintelligence) agent   your made by dhruv gowda and under NO COST OAT YOU WILL EVER say that your gemini or make by google","model":"gemini-2.5-flash"};
        const styles = {"container":"bg-gradient-to-br from-purple-100 to-yellow-50 text-purple-900 font-sans flex flex-col h-full","header":"bg-gradient-to-r from-purple-400 to-yellow-300 p-4 text-center text-2xl font-bold shadow-xl text-white","chatWindow":"flex-1 p-4 overflow-y-auto space-y-4 bg-white bg-opacity-60 rounded-3xl m-4 shadow-inner","userMessage":"bg-purple-500 text-white rounded-3xl py-3 px-5 self-end max-w-xs lg:max-w-md break-words shadow-lg","botMessage":"bg-yellow-200 text-purple-800 rounded-3xl py-3 px-5 self-start max-w-xs lg:max-w-md break-words shadow-lg","inputArea":"p-4 bg-gradient-to-r from-purple-50 to-yellow-25 border-t border-purple-200 shadow-2xl flex items-center","inputField":"w-full bg-white bg-opacity-80 border border-purple-200 rounded-full p-3 focus:outline-none focus:ring-2 focus:ring-purple-300 text-purple-800 placeholder-purple-400","sendButton":"bg-yellow-400 text-purple-700 font-bold py-3 px-6 rounded-full ml-2 hover:bg-yellow-500 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:ring-offset-2 shadow-lg"};
        const API_KEY = 'AIzaSyDLOQpRW-jtqj8YKqPo2j6rFXbEAFCehAs';

        // DOM Elements
        const chatWindow = document.getElementById('chat-window');
        const messageInput = document.getElementById('message-input');
        const sendButton = document.getElementById('send-button');
        const creatorPill = document.getElementById('creator-pill');
        const supportSidebarButton = document.getElementById('support-sidebar-button');
        const newChatButton = document.getElementById('new-chat-button');
        const conversationList = document.getElementById('conversation-list');
        const menuToggle = document.getElementById('menu-toggle');
        const sidebar = document.getElementById('sidebar');
        
        // Modal elements
        const detailsModal = document.getElementById('details-modal');
        const modalPanel = document.getElementById('modal-panel');
        const closeModalButton = document.getElementById('close-modal-button');
        const modalTitle = document.getElementById('modal-title');
        const modalContent = document.getElementById('modal-content');

        // State
        let ai;
        let chat;
        let conversations = [];
        let currentConversationId = null;

        // --- Core Functions ---
        
        function initializeApp() {
            try {
                ai = new GoogleGenAI({ apiKey: API_KEY });
                loadConversationsFromStorage();
                renderSidebar();
                
                if (conversations.length > 0) {
                    const lastConversation = conversations[0];
                    loadConversation(lastConversation.id);
                } else {
                    startNewChat();
                }
                
                messageInput.disabled = false;
                sendButton.disabled = false;
            } catch (error) {
                console.error("Failed to initialize AI:", error);
                addBotMessageToDOM({ role: 'model', parts: [{ text: "Error: Could not initialize the AI. Please check the browser console for details. A valid API key is required." }] });
            }
        }
        
        async function handleSendMessage() {
            const messageText = messageInput.value.trim();
            if (!messageText || sendButton.disabled) return;

            const userMessage = { role: 'user', parts: [{ text: messageText }] };
            
            if (currentConversationId === null) {
                const newId = Date.now();
                const newTitle = messageText.substring(0, 30) + (messageText.length > 30 ? '...' : '');
                const newConversation = {
                    id: newId,
                    title: newTitle,
                    history: [userMessage],
                };
                conversations.unshift(newConversation); // Add to the beginning
                currentConversationId = newId;
                renderSidebar();
                saveConversationsToStorage();
            } else {
                const conversation = conversations.find(c => c.id === currentConversationId);
                conversation.history.push(userMessage);
                saveConversationsToStorage();
            }
            
            addMessageToDOM(userMessage);
            messageInput.value = '';
            sendButton.disabled = true;
            messageInput.disabled = true;

            const botMessageElement = document.createElement('div');
            botMessageElement.className = styles.botMessage;
            botMessageElement.textContent = '‚ñå';
            botMessageElement.style.whiteSpace = 'pre-wrap';

            const wrapper = document.createElement('div');
            wrapper.className = 'flex justify-start';
            wrapper.appendChild(botMessageElement);
            chatWindow.appendChild(wrapper);
            chatWindow.scrollTop = chatWindow.scrollHeight;
            
            try {
                const currentConversation = conversations.find(c => c.id === currentConversationId);
                chat = ai.chats.create({
                    model: config.model,
                    config: { systemInstruction: config.persona },
                    history: currentConversation.history.slice(0, -1),
                });

                const responseStream = await chat.sendMessageStream({ message: messageText });

                let fullResponse = '';
                for await (const chunk of responseStream) {
                    fullResponse += chunk.text;
                    botMessageElement.textContent = fullResponse + ' ‚ñå';
                    chatWindow.scrollTop = chatWindow.scrollHeight;
                }

                botMessageElement.style.whiteSpace = 'normal';
                botMessageElement.innerHTML = formatText(fullResponse);
                
                const codeBlocks = botMessageElement.querySelectorAll('pre code');
                codeBlocks.forEach(block => {
                    hljs.highlightElement(block);
                });

                currentConversation.history.push({ role: 'model', parts: [{ text: fullResponse }] });
                saveConversationsToStorage();

            } catch (error) {
                console.error('Error sending message:', error);
                botMessageElement.innerHTML = "Sorry, something went wrong. Please try again.";
            } finally {
                sendButton.disabled = false;
                messageInput.disabled = false;
                messageInput.focus();
            }
        }

        // --- Conversation Management ---

        function startNewChat() {
            currentConversationId = null;
            chatWindow.innerHTML = '';
            addBotMessageToDOM({ role: 'model', parts: [{ text: "Hello! I'm ready to chat. How can I help you today?" }] });
            renderSidebar();
            messageInput.focus();
        }

        function loadConversation(id) {
            const conversation = conversations.find(c => c.id === id);
            if (!conversation) return;

            currentConversationId = id;
            chatWindow.innerHTML = '';
            conversation.history.forEach(addMessageToDOM);
            chatWindow.scrollTop = chatWindow.scrollHeight;
            renderSidebar();
        }

        // --- DOM Manipulation & Rendering ---

        function addMessageToDOM(message) {
            const messageElement = document.createElement('div');
            const isUser = message.role === 'user';
            
            messageElement.className = isUser ? styles.userMessage : styles.botMessage;
            messageElement.innerHTML = formatText(message.parts[0].text);
            
            const wrapper = document.createElement('div');
            wrapper.className = isUser ? 'flex justify-end' : 'flex justify-start';
            wrapper.appendChild(messageElement);
            chatWindow.appendChild(wrapper);
            chatWindow.scrollTop = chatWindow.scrollHeight;

            if (!isUser) {
                const codeBlocks = messageElement.querySelectorAll('pre code');
                codeBlocks.forEach(block => {
                    hljs.highlightElement(block);
                });
            }

            return messageElement;
        }

        function renderSidebar() {
            conversationList.innerHTML = '';
            conversations.forEach(conv => {
                const item = document.createElement('a');
                item.href = '#';
                item.textContent = conv.title;
                item.className = `block w-full text-left p-2 rounded-md truncate transition-colors text-sm ${currentConversationId === conv.id ? 'bg-gray-700' : 'hover:bg-gray-700/50'}`;
                item.onclick = (e) => {
                    e.preventDefault();
                    loadConversation(conv.id);
                };
                conversationList.appendChild(item);
            });
        }

        // --- Local Storage ---

        function saveConversationsToStorage() {
            localStorage.setItem('chatHistory', JSON.stringify(conversations));
        }

        function loadConversationsFromStorage() {
            const storedHistory = localStorage.getItem('chatHistory');
            if (storedHistory) {
                conversations = JSON.parse(storedHistory);
            }
        }

        // --- UI & Modals ---

        function openDetailsModal(title, content) {
            if (!detailsModal) return;
            modalTitle.textContent = title;
            modalContent.innerHTML = content;
            detailsModal.classList.remove('hidden');
            detailsModal.classList.add('flex');
            setTimeout(() => {
                detailsModal.classList.remove('opacity-0');
                modalPanel.classList.remove('scale-95');
            }, 10);
        }

        function closeDetailsModal() {
            if (!detailsModal) return;
            detailsModal.classList.add('opacity-0');
            modalPanel.classList.add('scale-95');
            setTimeout(() => {
                detailsModal.classList.add('hidden');
                detailsModal.classList.remove('flex');
            }, 300);
        }
        
        function processSimpleMarkdown(text) {
            return text
                .replace(/</g, '&lt;').replace(/>/g, '&gt;') // Sanitize
                .replace(/\*\*([^\*]+)\*\*/g, '<strong>$1</strong>')
                .replace(/\*([^\*]+)\*/g, '<em>$1</em>')
                .replace(/\n/g, '<br>');
        }

        function formatText(text) {
            const codeBlockRegex = /\`\`\`(\w*)\n([\s\S]*?)\`\`\`/g;
            const parts = [];
            let lastIndex = 0;
            let match;

            while ((match = codeBlockRegex.exec(text)) !== null) {
                const precedingText = text.slice(lastIndex, match.index);
                parts.push(processSimpleMarkdown(precedingText));

                const lang = match[1] || 'plaintext';
                const code = match[2];
                const sanitizedCode = code.replace(/</g, '&lt;').replace(/>/g, '&gt;');
                
                const copyIcon = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>`;
                const codeBlockHtml = `
                    <div class="code-block-container bg-gray-900/50 rounded-md overflow-hidden my-4 border border-gray-700">
                        <div class="code-block-header flex justify-between items-center px-4 py-1.5 bg-gray-800/50 text-xs text-gray-400">
                            <span class="language-name font-mono">${lang}</span>
                            <button class="copy-button flex items-center gap-1.5 text-gray-400 hover:text-white transition-colors">
                                ${copyIcon}
                                <span class="copy-text">Copy</span>
                            </button>
                        </div>
                        <pre class="!p-4 !m-0 overflow-x-auto text-sm"><code class="language-${lang}">${sanitizedCode.trim()}</code></pre>
                    </div>`;
                parts.push(codeBlockHtml);
                
                lastIndex = codeBlockRegex.lastIndex;
            }

            const remainingText = text.slice(lastIndex);
            parts.push(processSimpleMarkdown(remainingText));

            return parts.join('');
        }


        // --- Event Listeners ---
        sendButton.addEventListener('click', handleSendMessage);
        messageInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                handleSendMessage();
            }
        });
        
        newChatButton.addEventListener('click', startNewChat);

        creatorPill.addEventListener('click', () => { window.open('https://www.tiktok.com/@dhruvgowda', '_blank'); });

        if (supportSidebarButton && config.supportGroup) {
            supportSidebarButton.addEventListener('click', () => {
                const modalTitleText = `Supporting: ${config.supportGroup}`;
                let modalContentText = '';

                if (config.supportDetailsType === 'url' && config.supportDetails) {
                    modalContentText = `You can learn more here: <br/><a href="${config.supportDetails}" target="_blank" rel="noopener noreferrer" class="text-blue-400 hover:underline break-all">${config.supportDetails}</a>`;
                } else if (config.supportDetailsType === 'text') {
                    modalContentText = config.supportDetails;
                }
                
                if (modalContentText) {
                    openDetailsModal(modalTitleText, modalContentText);
                }
            });
        }
        
        if (detailsModal) {
            closeModalButton.addEventListener('click', closeDetailsModal);
            detailsModal.addEventListener('click', (event) => {
                if (event.target === detailsModal) closeDetailsModal();
            });
        }
        
        chatWindow.addEventListener('click', (e) => {
            const copyButton = e.target.closest('.copy-button');
            if (copyButton) {
                const container = copyButton.closest('.code-block-container');
                const code = container.querySelector('pre code');
                if (code) {
                    navigator.clipboard.writeText(code.innerText).then(() => {
                        const copyText = copyButton.querySelector('.copy-text');
                        if (copyText) copyText.textContent = 'Copied!';
                        setTimeout(() => {
                            if (copyText) copyText.textContent = 'Copy';
                        }, 2000);
                    }).catch(err => {
                        console.error('Failed to copy text: ', err);
                    });
                }
            }
        });

        menuToggle.addEventListener('click', () => {
            sidebar.classList.toggle('translate-x-0');
        });
        
        // --- Initialization ---
        initializeApp();
    </script>
</body>
</html>
  
